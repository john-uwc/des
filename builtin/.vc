#!/bin/bash

#author: steven, date: 2017.3.31


# distinguish the current vc system
function distsys(){
# git is the only support cvs now, the others may be support later
echo "git"
}

# calculate status of current git repos
function st_git(){
local br=$(_invoke_2c git branch | grep \* | cut -c3-) && _dw_store "vc" "${br:----}"
}

# main
local sys=$(_dw_query "sys.vc")
_invoke_2c "unalias" "$sys"
sys=$(distsys); $sys "$@"; st_$sys
_invoke_2c "alias" "$sys=source .vc"
_dw_store "sys.vc" $sys
